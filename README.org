#+STARTIP:showall hidestars

* Tree Emacs

使用 use-package 组织的 Emacs配置文件。注意：我是在 Emacs26.3 及其以上版本里使用的!

** Emacs 配置文件目录的构成

#+BEGIN_EXAMPLE

.emacs.d                      (整个配置文件目录)
├── auto-save-list            (放置所有因插件而生成的自动保存文件)
│   ├── recentf
│   ├── README
│   └── ...
├── early-init.el             (Emacs 27 新特性)
├── init.el                   (整个配置文件的入口)
├── init-test.el              (测试插件是否按预期工作的最小配置)
├── lisp                      (存放所有的配置文件)
│   ├── init-dired.el
│   ├── init-ivy.el
│   └── ...
├── site-lisp                 (安装非 melpa 上的插件,以及其他插件需要的文件)
│   ├── extensions            (非 melpa 插件)
│   │   ├── sdcv
│   │   ├── color-rg
│   │   └── ...
│   ├── snippets              (yasnippet 的模板文件目录)
│   │   └── emacs-lisp-mode
│   │       ├── lexical-binding
│   │       ├── provide
│   │       └── ...
│   │   └── html-mode
│   │       ├── comment
│   │       ├── html5
│   │       └── ...
│   │   └── ...


#+END_EXAMPLE

** 如何配置 非melpa 上的插件？

使用 use-package 可以很方便的来进行配置，例如：配置 [[https://github.com/manateelazycat/lazycat-emacs][lazycat]] 师傅的 sdcv 插件

- 使用这个插件要安装两个软件 stardict sdcv ( 我个人使用的 Manjaro -> sudo pacman -S stardict sdcv)
- 将 sdcv 插件下载下来并解压至 .emacs.d/site-lisp/extensions 目录里
- 在 lisp 目录里新建一个 init-sdcv.el 文件 ( 所有的配置文件放 lisp 文件夹里。不成文的规则，配置文件名 = init-<插件名>.el)
- 写入以下代码
#+begin_src emacs-lisp

(use-package sdcv
  :load-path "site-lisp/extensions/sdcv" ;;关键字 load-path -> 后面接加载插件的路劲(这是文件的目录路径)
  :config                                ;;关键字 config    -> 当一个插件加载之后才应用两个关键字之间的设置(延迟加载)
  ;; 词典链接 http://download.huzheng.org/zh_CN/
  ;; 根据懒猫的配置,下面一行要这样自定义启动目录
  (defvar my-sdcv-data-dir (file-truename "~/.emacs.d/site-lisp/sdcv-dict"))

  (setq sdcv-say-word-p t)               ;;打开语音功能
  (setq sdcv-dictionary-simple-list      ;;星际译王屏幕取词词典, 简单, 快速
        '("懒虫简明英汉词典"
          "懒虫简明汉英词典"
          "KDic11万英汉词典"))
  (setq sdcv-dictionary-complete-list    ;;星际译王的词典, 完全, 详细
        '(
          "懒虫简明英汉词典"
          "英汉汉英专业词典"
          "XDICT英汉辞典"
          "stardict1.3英汉辞典"
          "WordNet"
          "XDICT汉英辞典"
          "Jargon"
          "懒虫简明汉英词典"
          "FOLDOC"
          "新世纪英汉科技大词典"
          "KDic11万英汉词典"
          "朗道汉英字典5.0"
          "CDICT5英汉辞典"
          "新世纪汉英科技大词典"
          "牛津英汉双解美化版"
          "21世纪双语科技词典"
          "quick_eng-zh_CN"
          ))

  (setq sdcv-dictionary-data-dir my-sdcv-data-dir);;设置词典的路径

  :bind ("C-c t" . sdcv-search-pointer+));;关键字 bind      -> 绑定一个快捷键

#+end_src

[[https://github.com/jwiegley/use-package/tree/4714d73b61bdb378f6e9e3f3838cae1abbf65ea0][use-package]] 的作者是 John Wiegley, 非常感谢作者的付出！带来了这样一款集中管理配置的插件。有关该插件更详细具体的的用法还是查看作者的 README.md 文档吧！里面作者举了很多例子，是不太可能看不懂的，耐着看看吧！
